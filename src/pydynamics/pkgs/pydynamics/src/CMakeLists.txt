MESSAGE( "" )
MESSAGE( "!!! en dur a changer !!!" )
SET(PYDYNAMICS_WRAPPER_SRC "/pub/.vle-1.1/pkgs-1.1/pydynamics_wrapper/wrapping" )

include_directories(${CMAKE_SOURCE_DIR}/src ${VLE_INCLUDE_DIRS}
  ${VLE_DEPS_INCLUDE_DIRS} ${Boost_INCLUDE_DIRS}
  ${PYDYNAMICS_WRAPPER_SRC}
  ${PYTHON_INCLUDE_DIRS}
  ${CELLDEVS_INCLUDE_DIRS} ${CELLQSS_INCLUDE_DIRS}
  ${DECISION_INCLUDE_DIRS} ${DIFFERENCE_EQU_INCLUDE_DIRS}
  ${DIFFERENTIAL_EQU_INCLUDE_DIRS} ${DSDEVS_INCLUDE_DIRS} ${FSA_INCLUDE_DIRS}
  ${PETRINET_INCLUDE_DIRS})

link_directories(${VLE_LIBRARY_DIRS}
  ${VLE_DEPS_LIBRARY_DIRS} ${Boost_LIBRARY_DIRS}
  ${PYTHON_LIBRARY_DIRS}
  ${CELLDEVS_LIBRARY_DIRS} ${CELLQSS_LIBRARY_DIRS} ${DECISION_LIBRARY_DIRS}
  ${DIFFERENCE_EQU_LIBRARY_DIRS} ${DIFFERENTIAL_EQU_LIBRARY_DIRS}
  ${DSDEVS_LIBRARY_DIRS} ${FSA_LIBRARY_DIRS} ${PETRINET_LIBRARY_DIRS})

#####
MESSAGE( "" )
MESSAGE( "{CMAKE_SOURCE_DIR} : ${CMAKE_SOURCE_DIR}")
MESSAGE( "{VLE_INCLUDE_DIRS} : ${VLE_INCLUDE_DIRS}")
MESSAGE( "{VLE_DEPS_INCLUDE_DIRS} : ${VLE_DEPS_INCLUDE_DIRS} ")
MESSAGE( "{PYDYNAMICS_WRAPPER_SRC} : ${PYDYNAMICS_WRAPPER_SRC} ")
MESSAGE( "{PYTHON_INCLUDE_DIRS} : ${PYTHON_INCLUDE_DIRS} " )
MESSAGE( "" )
MESSAGE( "{VLE_LIBRARY_DIRS} : ${VLE_LIBRARY_DIRS} ")
MESSAGE( "{VLE_DEPS_LIBRARY_DIRS} : ${VLE_DEPS_LIBRARY_DIRS} " )
MESSAGE( "{PYTHON_LIBRARY_DIRS} : ${PYTHON_LIBRARY_DIRS} " )
MESSAGE( "" )
MESSAGE( "VLE_LIBRARIES} : ${VLE_LIBRARIES} " )
MESSAGE( "VLE_DEPS_LIBRARIES} : ${VLE_DEPS_LIBRARIES} " )
MESSAGE( "PYTHON_LIBRARIES} : ${PYTHON_LIBRARIES} " )
MESSAGE( "" )
#####

DeclareDevsDynamics(MyModelCpp "MyModelCpp.cpp")

#####

ADD_LIBRARY( pydynamics MODULE PyDynamics.cpp )
TARGET_LINK_LIBRARIES( pydynamics ${VLE_LIBRARIES} ${VLE_DEPS_LIBRARIES} ${PYTHON_LIBRARIES} )
INSTALL(TARGETS  pydynamics
        RUNTIME DESTINATION plugins/simulator
        LIBRARY DESTINATION plugins/simulator)

###INSTALL(FILES MyModelPy.py DESTINATION pythonsrc)
INSTALL(DIRECTORY . DESTINATION pythonsrc FILES_MATCHING PATTERN "*.py")

#####

#
# this macro manage generated C++ code
#
#
CheckAndDeclareGeneratedModels()

